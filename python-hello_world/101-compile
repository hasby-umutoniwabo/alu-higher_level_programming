#!/bin/bash

# Check if PYFILE is set
if [ -z "$PYFILE" ]; then
    echo "Error: PYFILE environment variable is not set."
    exit 1
fi

# Extract the filename without extension
FILENAME=$(basename "$PYFILE" .py)

# Compile the Python file
echo "Compiling $PYFILE ..."
python3 -m py_compile "$PYFILE"

# Rename the compiled file
if [ -f "__pycache__/${FILENAME}.cpython-*.pyc" ]; then
    mv "__pycache__/${FILENAME}.cpython-*.pyc" "${FILENAME}.pyc"
    echo "Compiled file created: ${FILENAME}.pyc"
else
    echo "Error: Compilation failed."
    exit 1
fi
